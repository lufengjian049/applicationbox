{% extends "base.html" %} {% block main %}
<style>
    .nav-pills > li.active > a, .nav-pills > li.active > a:hover, .nav-pills > li.active > a:focus{
          background-color: #000;
          border-radius: 0;
    }
    .musicwrapper{
        margin: 0;padding: 0;
    }
    .musicitem{
        list-style: none;
        padding: 10px 10px;
        border-bottom: 1px solid #ccc;
        cursor: pointer;
    }
    .musicitem.active{
        background-color: #ccc;
    }
</style>
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
    <!--<li data-target="#carousel-example-generic" data-slide-to="2"></li>-->
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    <div class="item active">
      <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzc3NyIvPjxnPjx0ZXh0IHg9IjMxNy43MzQzNzUiIHk9IjI1MCIgc3R5bGU9ImZpbGw6IzU1NTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZTo0MnB0O2RvbWluYW50LWJhc2VsaW5lOmNlbnRyYWwiPkZpcnN0IHNsaWRlPC90ZXh0PjwvZz48L3N2Zz4=" 
      alt="...">
      <div class="carousel-caption">
          <h3>巧虎 巧虎</h3>
          <p>Description</p>
      </div>
    </div>
    <div class="item">
      <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzY2NiIvPjxnPjx0ZXh0IHg9IjI3Ny4yODEyNSIgeT0iMjUwIiBzdHlsZT0iZmlsbDojNDQ0O2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjQycHQ7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+U2Vjb25kIHNsaWRlPC90ZXh0PjwvZz48L3N2Zz4=" alt="...">
      <div class="carousel-caption">
        <h3>巧虎 巧虎</h3>
          <p>Description</p>
      </div>
    </div>
    <!--<div class="item">
      <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0iIzU1NSIvPjxnPjx0ZXh0IHg9IjMwOC40MjE4NzUiIHk9IjI1MCIgc3R5bGU9ImZpbGw6IzMzMztmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZTo0MnB0O2RvbWluYW50LWJhc2VsaW5lOmNlbnRyYWwiPlRoaXJkIHNsaWRlPC90ZXh0PjwvZz48L3N2Zz4=" alt="...">
      <div class="carousel-caption">
            <h3>third</h3>
          <p>ddddddd</p>
      </div>
    </div>-->
  </div>

  <!-- Controls -->
  <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
<div id="audioWrapper">
    <audio src="/statics/audio/01.mp3" style="width:100%" preload="auto" controls autoplay></audio>
</div>
<div style="display:flex;margin-top:1px">
    <ul class="nav nav-pills nav-stacked" role="tablist" style="flex-basis: 120px;">
        {% for cateitem in cate %}
        <li role="presentation" class={{"active" if loop.first else ""}}><a href="#{{cateitem.key}}" role="tab" data-toggle="tab">{{cateitem.alias}}</a></li>
        {% endfor %}
    </ul>

    <!-- Tab panes -->
    <div class="tab-content" style="flex:1">
        {% for item in data%}
            <div role="tabpanel" class="tab-pane {{'active' if loop.first else ''}}" id="{{item.key}}">
                <ul class="musicwrapper">
                    {% if item.music.length == 0%}
                        <li>还么有歌曲哦，还不快快添加。。。</li>
                    {% endif %}
                    {% for subitem in item.music %}
                        {% set mdata= {name:subitem.name} | dump %}
                        <li class="musicitem" data-path="{{subitem.path}}" data-musicdata="{{mdata}}">{{subitem.name}}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    </div>
</div>
<script>
    $( function() { 
        // $( 'audio' )[0].play();
        $(".musicitem").on("click",function(){
            var _this = $(this);
            if(!_this.hasClass("active")){ //不是正在播放
                var mdata = _this.data("musicdata");
                var curaudio = $( 'audio' )[0];
                curaudio.src = "/statics/audio/"+_this.data("path")+".mp3";
                curaudio.load();
                _this.siblings().removeClass("active");
                _this.addClass("active");
                $(".carousel-caption h3").html(mdata.name);
            }
        })
    });
</script>
{% endblock %}